<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ post_title }} - Sean's Blog</title>
  <link rel="canonical" href="https://seanpedersen.github.io/posts/{{ post_id }}">
  <meta name="description" content="{{ excerpt }}">
  <meta name="keywords" content="{{ keywords }}">
  <meta property="og:type" content="article">
  <meta property="og:title" content="{{ post_title }}">
  <meta property="og:description" content="{{ excerpt }}">
  <meta property="og:url" content="https://seanpedersen.github.io/posts/{{ post_id }}">
  <meta property="og:image" content="https://seanpedersen.github.io/images/sierpinski-twitter-square.png">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{{ post_title }}">
  <meta name="twitter:description" content="{{ excerpt }}">
  <meta name="twitter:image" content="https://seanpedersen.github.io/images/sierpinski-twitter-square.png">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS Feed">
  <link rel="stylesheet" href="/styles/global.css">
  <link rel="stylesheet" href="/styles/post.css">
  {% if has_code_blocks %}
  <link rel="stylesheet" href="/styles/code-blocks.css">
  <link rel="stylesheet" href="/styles/prism-tomorrow.css">
  {% endif %}
  {% if has_toc %}
  <style>@media (min-width: 1400px) { .toc { position: fixed; width: 250px; left: calc(50% - 770px); top: 100px; } }</style>
  {% endif %}
  <script>
      (function () {
        const initialColorScheme = ""; // "light" | "dark"
        const currentTheme = localStorage.getItem("theme");

        function getPreferTheme() {
          if (currentTheme) return currentTheme;
          if (initialColorScheme) return initialColorScheme;
          return window.matchMedia("(prefers-color-scheme: dark)").matches
            ? "dark"
            : "light";
        }

        const themeValue = getPreferTheme();

        // Set theme immediately to prevent flash
        document.firstElementChild?.setAttribute("data-theme", themeValue);

        // Export minimal API for external script
        window.theme = {
          themeValue: themeValue,
          getTheme: () => window.theme.themeValue,
          setTheme: val => {
            window.theme.themeValue = val;
          },
        };
      })();
  </script>
</head>
<body>
  <div class="container">
    <header class="header">
      <a href="/" class="headerLink">
        <img src="/favicon.svg" alt="" class="headerLogo">
        <h2 class="headingLg">Sean's Blog</h2>
      </a>
    </header>
    <main class="main postPage{% if not has_toc %} noToc{% endif %}">
      <article class="postContainer">
        <span id="{{ title_id }}" style="position: absolute; top: 0; visibility: hidden;" aria-hidden="true"></span>
        <h1 class="headingXl postTitle">
          {% if post_icon %}
          <img src="{{ post_icon }}" alt="" class="postIcon" aria-hidden="true">
          {% endif %}
          <span class="postTitleText">{{ post_title }}</span>
        </h1>
        {% if has_toc %}
        <nav class="toc">
          <input type="checkbox" id="toc-toggle" class="toc-checkbox">
          <label for="toc-toggle" class="tocToggle" aria-label="Toggle table of contents">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
          </label>
          <div class="tocHeader">
            <h2><a href="#{{ title_id }}">{{ post_title }}</a></h2>
          </div>
          <ul class="tocList">
            {% for h in headings %}
            <li style="margin-left: {{ (h.level - 1) * 12 }}px;">
              <a href="#{{ h.id }}">{{ h.text }}</a>
            </li>
            {% endfor %}
          </ul>
        </nav>
        {% endif %}
        <div class="postMeta">
          <div class="lightText">{{ formatted_date }}</div>
          <a href="https://github.com/SeanPedersen/seanpedersen.github.io/edit/main/posts/{{ post_id }}.md" target="_blank" rel="noopener noreferrer" class="editOnGithubLink">
            Edit on GitHub
          </a>
        </div>
        <div class="markdown-content" style="padding-bottom: 0.25rem; margin-bottom: 0;">
          {{ content_html | safe }}
        </div>
        {% if related_posts %}
        <footer class="relatedPostsFooter">
          <h3>Related Articles</h3>
          <ul class="relatedPostsList" style="padding-left: 0">
            {% for rel in related_posts %}
            <li class="relatedPostItem">
              <a href="/posts/{{ rel.id }}" class="relatedPostLink">
                {% if rel.icon %}
                <img src="{{ rel.icon }}" alt="" class="postIcon" aria-hidden="true">
                {% endif %}
                <span class="postTitleText">{{ rel.title }}</span>
              </a>
            </li>
            {% endfor %}
          </ul>
        </footer>
        {% endif %}
        <footer class="backToTopFooter">
          <hr aria-hidden="true" style="width: 100%; border: 0; border-top: 1px solid rgba(127,127,127,0.35); margin: 0.25rem 0;" />
          <a href="#{{ title_id }}" class="backToTopLink">â†‘ Back to top</a>
          <p>omnia mirari, gaudium explorandi .:.</p>
        </footer>
      </article>
    </main>
  </div>
  <script>
    window.__POST_DATA__ = {
      title: {{ post_title_json | safe }},
      titleId: {{ title_id_json | safe }},
      hasTableOfContents: {{ has_toc }}
    };
    // Show back to top link only if page is scrollable (minimal detection)
    if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {
      document.body.classList.add('has-scrollbar');
    }
  </script>
  {% if has_code_blocks %}
  <script src="/js/code-blocks.js" defer></script>
  {% endif %}
  <script src="/js/prefetch.js" defer></script>
  <script>
    (function() {
      if (typeof window === 'undefined') return;

      var script = document.createElement('script');
      script.src = '/js/posthog-lite.js';
      script.onload = function() {
        if (window.PostHogLite) {
          window.posthog = new window.PostHogLite('phc_9XPlyPALuefIMAMSfsvBk4jVuSelJyjl7xwhXigkHAP', {
            host: 'https://us.i.posthog.com',
            person_profiles: 'identified_only',
            capturePageview: true
          });
        }
      };
      document.head.appendChild(script);
    })();
  </script>
</body>
</html>
